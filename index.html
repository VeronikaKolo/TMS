<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trame VMS Interactive</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; font-size: 14px; }
    h1 { text-align: left; }
    .top-fields {
    display: flex;
    flex-wrap: wrap; /* Permettre aux √©l√©ments de passer √† la ligne si n√©cessaire */
    gap: 20px; /* Espace entre les √©l√©ments */
    margin-bottom: 20px;
    align-items: baseline;
}

.top-fields label {
    font-weight: bold;
    font-size: 14px;
    display: flex;
    align-items: center;
}

.top-fields input {
    margin-left: 10px; /* Espace entre le label et l'input */
    flex: 1; /* Permettre √† l'input de prendre l'espace disponible */
}

/* Style pour les petits √©crans */
@media (max-width: 600px) {
    .top-fields {
        flex-direction: column; /* Disposer les √©l√©ments en colonne */
        align-items: flex-start; /* Aligner les √©l√©ments √† gauche */
    }

    .top-fields label {
        width: 100%; /* Prendre toute la largeur disponible */
    }

    .top-fields input {
        width: calc(100% - 10px); /* Ajuster la largeur de l'input pour tenir compte de la marge */
    }
}
    table { width: 100%; border-collapse: collapse; margin-bottom: 10px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background: #f0f0f0; }
    select, input[type="text"], input[type="date"] { width: 100%; }
    .PP { background: #e6ffe6; }
    .CD { background: #fff5e6; }
    .AD { background: #ffe6e6; }
    .counters { margin-bottom: 20px; }
    .counters span { margin-right: 15px; font-weight: bold; }
    button { padding: 8px 12px; border: none; border-radius: 4px; cursor: pointer; }
    .add-row { background: #4CAF50; color: white; }
    .show-consignes { background: #f44336; color: white; }
    .remove-row { background: #f44336; color: white; }
    .export { background: #2196F3; color: white; }
    .abreviations { color: #f44336; font-size: smaller;}
    .buttons {margin-bottom: 10px;}
    .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0,0,0);
            background-color: rgba(0,0,0,0.4);
        }
        .modal-content {
            margin: 15% auto;
            padding: 20px;
            width: 80%;
            background-color: #fefefe;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    .large-row {
      height: 50px;
      display: flex;
    }
    .picto {
      width: 50px;
    }
    input::placeholder {
    font-size: 0.7rem; /* Taille par d√©faut */
}
/* Conteneur principal utilisant Flexbox */
.container {
    display: flex;
    align-items: center; /* Aligner les √©l√©ments verticalement au centre */
    justify-content: space-between; /* Espacer les √©l√©ments uniform√©ment */
    padding: 10px; /* Ajouter un peu de padding autour du conteneur */
}

/* Styles pour les images */
.logo {
    max-width: 100px; /* Ajuster la taille des images selon vos besoins */
    height: auto; /* Maintenir les proportions des images */
    float: left;
}
 .regles {
    max-width: 200px; /* Ajuster la taille des images selon vos besoins */
    height: auto; /* Maintenir les proportions des images */
    float: right;
}

/* Style pour le titre */
h1 {
    margin: 0; /* Supprimer la marge par d√©faut */
    font-size: 2rem; /* Ajuster la taille du texte selon vos besoins */
}

/* Pour les √©crans de largeur inf√©rieure √† 600px */
@media (max-width: 600px) {
    input::placeholder {
        font-size: 0.3rem; /* Taille plus petite pour les petits √©crans */
    }
    input, select {
        font-size: 0.3rem; /* Taille plus petite pour les petits √©crans */
    }
    .logo {
    max-width: 50px; /* Ajuster la taille des images selon vos besoins */
    height: auto; /* Maintenir les proportions des images */
    float: left;
}
 .regles {
    max-width:100px; /* Ajuster la taille des images selon vos besoins */
    height: auto; /* Maintenir les proportions des images */
    float: right;
}

}

/* Pour les √©crans de largeur sup√©rieure √† 1200px */
@media (min-width: 1200px) {
    input::placeholder {
        font-size: 1.0rem; /* Taille plus grande pour les grands √©crans */
    }
}

/* Conteneur pour centrer la table */
.table-container {
    display: flex;
    justify-content: center; /* Centrer horizontalement */
    align-items: center; /* Centrer verticalement */
    height: 100vh; /* Prendre toute la hauteur de la fen√™tre */
}

/* Style pour la table */
.table-signature {
    width: 100%; /* Largeur maximale de la table */
    max-width: 800px; /* Largeur maximale pour √©viter que la table ne soit trop large */
    border-collapse: collapse; /* Supprimer les espaces entre les cellules */
}

/* Style pour les cellules de la table */
.table-signature td {
    padding: 10px;
    border: 1px solid #ccc; /* Bordure des cellules */
}

/* Style pour les inputs */
.large-row {
    width: 100%; /* Largeur maximale des inputs */
    padding: 10px;
    box-sizing: border-box; /* Inclure le padding dans la largeur totale */
}

        
  </style>
</head>
<body>
  <div class="container">
  <img class="logo" src="CDES_Logo.png" alt="">
  <h1> VMS</h1>
<img class="regles" src="regles.png" alt="">
  </div>
  <div class="top-fields">
    <label>Date:<input type="date" id="visite-date" value=""></label>
    <label>Chantier:<input type="text" id="chantier" placeholder="Nom du chantier"></label>
    <label>Conducteur de travaux:<input type="text" id="visiteur" placeholder="Nom / Fonction"></label>
    <label>Collaborateurs rencontr√©s:<input type="text" id="visiteur" placeholder="Nom"></label>
  </div>
  <div class="counters">
    <span>PP üëç: <span id="count-PP">0</span></span>
    <span>CD ‚ö†Ô∏è: <span id="count-CD">0</span></span>
    <span>AD üö´: <span id="count-AD">0</span></span>
  </div>
  <table id="obs-table">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
        <th>Action</th>
        <th>Pilote</th>
        <th>√âch√©ance</th>
        <th>Statut</th>
        <th>Suppr.</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <div class="buttons">
  <button class="add-row" onclick="addRow()">Ajouter une observation</button>
  <button class="export" onclick="print()">Imprimer / Exporter</button>
  <button class="show-consignes" id="openModalBtn">?</button>
</div>
  <table class="table-signature">
    <tr >
        <td><input class="large-row" type="text" placeholder="Perception g√©n√©rale du visiteur et signature"></td>
        <td><input class="large-row" type="text" placeholder="Commentaires des personnes rencontr√©es et signature"></td>
    </tr>
</table>

  <!-- Structure de la modale -->
<div id="imageModal" class="modal">
  <div class="modal-content">
      <ul class="abreviations">
        <li>PP : Point Positif</li>
        <li>AD : Acte Dangereux : t√©l√©phoner en conduisant, op√©ration de travail sans EPI </li>
        <li>CD : Condition dangereuse : une consigne pas √† jour, des trous dans le sol, absence de balisage </li>
      </ul>
      <span class="close">&times;</span>
  </div>
</div>

  <script>
    function updateCounters() {
      const rows = document.querySelectorAll('#obs-table tbody tr');
      let cPP = 0, cCD = 0, cAD = 0;
      rows.forEach(r => {
        const type = r.querySelector('.type-select').value;
        if (type === 'PP') cPP++;
        if (type === 'CD') cCD++;
        if (type === 'AD') cAD++;
      });
      document.getElementById('count-PP').textContent = cPP;
      document.getElementById('count-CD').textContent = cCD;
      document.getElementById('count-AD').textContent = cAD;
    }
    function addRow() {
      const tbody = document.querySelector('#obs-table tbody');
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td><select class="type-select" onchange="applyColor(this); updateCounters()">
          <option value="PP">PP üëç</option>
          <option value="CD">CD ‚ö†Ô∏è</option>
          <option value="AD">AD üö´</option>
        </select></td>
        <td><input type="text" placeholder="Description"></td>
        <td><input type="text" placeholder="Action √† mener"></td>
        <td><input type="text" placeholder="Responsable"></td>
        <td><input type="date"></td>
        <td><select><option>√Ä planifier</option><option>En cours</option><option>Cl√¥tur√©e</option></select></td>
        <td><button class="remove-row" onclick="removeRow(this)">‚úñ</button></td>
      `;
      tbody.appendChild(tr);
      applyColor(tr.querySelector('.type-select'));
      updateCounters();
    }
    function removeRow(btn) {
      btn.closest('tr').remove();
      updateCounters();
    }
    function applyColor(select) {
      const row = select.closest('tr');
      row.classList.remove('PP', 'CD', 'AD');
      row.classList.add(select.value);
    }

      // Fonction pour ouvrir la modale
      function openModal(imageUrl) {
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImage');
        modal.style.display = 'block';
    }

    // Fonction pour fermer la modale
    function closeModal() {
        const modal = document.getElementById('imageModal');
        modal.style.display = 'none';
    }

    // √âcouteur d'√©v√©nement pour le bouton d'ouverture
    document.getElementById('openModalBtn').onclick = function() {
        openModal('regles.png');
    };

    // √âcouteur d'√©v√©nement pour le bouton de fermeture
    document.getElementsByClassName('close')[0].onclick = function() {
        closeModal();
    };

    // Fermer la modale si l'utilisateur clique en dehors de l'image
    window.onclick = function(event) {
        const modal = document.getElementById('imageModal');
        if (event.target == modal) {
            closeModal();
        }
    };

    window.onload = function() {
      addRow();
      document.getElementById('visite-date').valueAsDate = new Date();
    }
  </script>
</body>
</html>
